<div class="logo-top logo"></div>
<div class="logo-bottom logo"></div>
<section class="panel autoload" data-count="2" data-next="slide3">
	<div class="containerBlock">
		<div class="slide slide-2">
			<img class="vichy-logo" src="images/vichy.png" alt="" />
			<div class="content">
				<div class="content__img">
					<div class="pacient">
						<div class="pacient__img">
							<img src="images/women-1.jpg" alt="" />
						</div>
						<div class="pacient__name"><span>ДАРИНА </span></div>
						<div class="pacient__age"><span>(45 РОКІВ) </span></div>
						<ul class="pacient-list">
							<li class="pacient-list__item"><span>чутлива шкіра </span></li>
							<li class="pacient-list__item"><span>глибокиі зморшки, втрата пружності та еластичності </span></li>
							<li class="pacient-list__item"><span>ярко виражені пігментні плями </span></li>
						</ul>
					</div>
				</div>
				<div class="content__product">
					<div id="content">
						<div class="slots" id="cardSlots">
							<div class="slots__item" data-number="1">
								<img src="images/prod1.png" class="prod1" alt="" />
							</div>
							<div class="slots__item" data-number="2">
								<img src="images/prod2.png" class="prod2" alt="" />
							</div>
							<div class="slots__item" data-number="3">
								<div class="plus">+</div>
								<img src="images/prod3.png" class="prod3" alt="" />
								<img src="images/prod4.png" class="prod4" alt="" />
								<img src="images/prod5.png" class="prod5" alt="" />
							</div>
							<div class="slots__item" data-number="4">
								<div class="plus">+</div>
								<img src="images/prod8.png" class="prod8" alt="" />
								<img src="images/prod9.png" class="prod9" alt="" />
								<img src="images/prod10.png" class="prod10" alt="" />
							</div>
						</div>
						<div class="list" id="cardPile">
							<div class="list__item" data-number="1" data-prod="1">
								<img src="images/prod1.png" alt="" />
							</div>
							<div class="list__item" data-number="2" data-prod="2">
								<img src="images/prod2.png" alt="" />
							</div>
							<div class="list__item" data-number="3" data-prod="3">
								<img src="images/prod3.png" alt="" />
							</div>
							<div class="list__item" data-number="3" data-prod="4">
								<img src="images/prod4.png" alt="" />
							</div>
							<div class="list__item" data-number="5" data-prod="5">
								<img src="images/prod5.png" alt="" />
							</div>
							<div class="list__item" data-number="5" data-prod="6">
								<img src="images/prod6.png" alt="" />
							</div>
							<div class="list__item" data-number="5" data-prod="7">
								<img src="images/prod7.png" alt="" />
							</div>
							<div class="list__item" data-number="4" data-prod="8">
								<img src="images/prod8.png" alt="" />
							</div>
							<div class="list__item" data-number="4" data-prod="9">
								<img src="images/prod9.png" alt="" />
							</div>
							<div class="list__item" data-number="4" data-prod="10">
								<img src="images/prod10.png" alt="" />
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="help-inf">Обери продукт і занеси у відповідну категорію догляду</div>
		</div>
	</div>
</section>
<style>
	section {
		opacity: 0;
	}
	.prev {
		display: none;
	}
	.next {
		display: none;
	}
	.content {
		display: -webkit-box;
		display: -ms-flexbox;
		display: flex;
	}
	.content__img {
		width: 45.4em;
	}
	.content__product {
		-webkit-box-flex: 1;
		-ms-flex: 1;
		flex: 1;
		padding-left: 6.4em;
	}
	.pacient {
		background: #ecae49;
		padding: 0 3em;
	}
	.pacient__img {
		display: block;
		margin-bottom: -1.9em;
	}
	.pacient__img img {
		position: relative;
		top: -4em;
	}
	.pacient__name {
		text-align: center;
	}
	.pacient__name span {
		font-weight: 400;
		font-size: 6em;
		color: #fff;
	}
	.pacient__age {
		text-align: center;
		margin-bottom: 1.4em;
	}
	.pacient__age span {
		font-weight: 700;
		font-size: 2.3em;
		color: #fff;
	}
	.pacient-list {
		padding-left: 2em;
	}
	.pacient-list__item {
		position: relative;
		padding-left: 2.5em;
		margin-bottom: 1.5em;
	}
	.pacient-list__item:last-child {
		bottom: 0;
	}
	.pacient-list__item::before {
		content: '•';
		position: absolute;
		top: 0.2em;
		left: 0;
		font-weight: 400;
		font-size: 2.2em;
		color: #fff;
	}
	.pacient-list__item span {
		font-weight: 400;
		font-size: 2.5em;
		color: #fff;
	}
	.slots {
		display: -webkit-box;
		display: -ms-flexbox;
		display: flex;
		height: 30em;
		margin-bottom: 10px;
	}
	.slots__item {
		width: 25em;
		border: 1px solid red;
		display: -webkit-box;
		display: -ms-flexbox;
		display: flex;
		-webkit-box-align: center;
		-ms-flex-align: center;
		align-items: center;
		-webkit-box-pack: center;
		-ms-flex-pack: center;
		justify-content: center;
		padding: 1em;
		position: relative;
	}
	.slots__item img {
		max-height: 100%;
		opacity: 0;
	}
	.slots__item.active {
		-webkit-box-shadow: 0 0 25px green;
		box-shadow: 0 0 25px green;
	}
	.slots__item.active .plus {
		opacity: 0;
	}
	.slots__item.half-active {
		-webkit-box-shadow: 0 0 25px #ff0;
		box-shadow: 0 0 25px #ff0;
	}
	.slots__item.half-active .plus {
		opacity: 1;
	}
	.slots__item.prod1 img.prod1 {
		opacity: 1;
	}
	.slots__item.prod2 img.prod2 {
		opacity: 1;
	}
	.slots__item.prod3 img.prod3 {
		opacity: 1;
	}
	.slots__item.prod4 img.prod4 {
		opacity: 1;
	}
	.slots__item.prod5 img.prod5 {
		opacity: 1;
	}
	.slots__item.prod6 img.prod6 {
		opacity: 1;
	}
	.slots__item.prod7 img.prod7 {
		opacity: 1;
	}
	.slots__item.prod8 img.prod8 {
		opacity: 1;
	}
	.slots__item.prod9 img.prod9 {
		opacity: 1;
	}
	.slots__item.prod10 img.prod10 {
		opacity: 1;
	}
	.list {
		display: -webkit-box;
		display: -ms-flexbox;
		display: flex;
		-ms-flex-wrap: wrap;
		flex-wrap: wrap;
	}
	.list__item {
		height: 20em;
		display: -webkit-box;
		display: -ms-flexbox;
		display: flex;
		-webkit-box-align: center;
		-ms-flex-align: center;
		align-items: center;
		-webkit-box-pack: center;
		-ms-flex-pack: center;
		justify-content: center;
		padding: 0.5em;
	}
	.list__item img {
		max-height: 100%;
	}
	.list__item.ui-draggable-disabled {
		-webkit-transform-origin: left top;
		transform-origin: left top;
		-webkit-transform: scale(1.5);
		transform: scale(1.5);
		opacity: 0;
	}
	.plus {
		opacity: 0;
		border: 2px solid #000;
		background: #000;
		width: 30px;
		height: 30px;
		position: absolute;
		right: 0;
		top: 0;
		display: -webkit-box;
		display: -ms-flexbox;
		display: flex;
		-webkit-box-align: center;
		-ms-flex-align: center;
		align-items: center;
		-webkit-box-pack: center;
		-ms-flex-pack: center;
		justify-content: center;
		color: #fff;
		font-size: 35px;
	}
</style>
<script>
	TweenMax.to('section', 0.5, { opacity: 1, ease: Linear.easeNone });
	var tl = new TimelineMax({ paused: true, onComplete: () => show_arrow_next_slide() });
	tl.play();

	var prodItems = document.querySelectorAll('.list__item');
	var prodSlots = document.querySelectorAll('.slots__item');

	prodItems.forEach((prodItem, index) => {
		$(prodItem).draggable({
			containment: '#content',
			stack: '#cardPile div',
			cursor: 'move',
			revert: true,
		});
	});
	prodSlots.forEach((prodItem, index) => {
		$(prodItem).droppable({
			accept: '#cardPile div',
			hoverClass: 'hovered',
			drop: handleCardDrop,
		});
	});

	var correctCards = 0;
	var сountCard = [1, 1, 2, 3];

	function handleCardDrop(event, ui) {
		var slotNumber = $(this).data('number');
		var сountAnswer = $(this).data('answer');
		var cardNumber = ui.draggable.data('number');
		var prod = ui.draggable.data('prod');

		// If the card was dropped to the correct slot,
		// change the card colour, position it directly
		// on top of the slot, and prevent it being dragged
		// again

		if (slotNumber == cardNumber) {
			сountCard[slotNumber - 1]--;
			ui.draggable.addClass('correct');
			ui.draggable.draggable('disable');
			$('.slots__item:nth-child(' + slotNumber + ')').addClass('prod' + prod);

			if (сountCard[slotNumber - 1] === 0) {
				$('.slots__item:nth-child(' + slotNumber + ')')
					.removeClass('half-active')
					.addClass('active');
			} else {
				$('.slots__item:nth-child(' + slotNumber + ')').addClass('half-active');
			}

			ui.draggable.position({ of: $(this), my: 'center top', at: 'center top' });
			ui.draggable.draggable('option', 'revert', false);
			correctCards++;
			show_arrow_next_slide();
		}

		// If all the cards have been placed correctly then display a message
		// and reset the cards for another go

		// if (correctCards == 10) {
		// 	$('#successMessage').show();
		// 	$('#successMessage').animate({
		// 		left: '380px',
		// 		top: '200px',
		// 		width: '400px',
		// 		height: '100px',
		// 		opacity: 1,
		// 	});
		// }
	}
	function show_arrow_next_slide() {
		if (correctCards == 4) {
			setTimeout(function () {
				$('.next').show('slow');
			}, 2000);
		}
	}
</script>

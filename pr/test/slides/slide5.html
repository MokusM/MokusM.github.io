<div class="logo-top logo"></div>
<div class="logo-bottom logo"></div>
<section class="panel autoload" data-count="5" data-next="slide6" data-prev="slide4">
	<div class="containerBlock">
		<div class="slide slide-5">
			<img class="vichy-logo" src="images/vichy.png" alt="" />
			<div class="content">
				<div class="content__img">
					<div class="pacient">
						<div class="pacient__img">
							<img src="images/women-4.jpg" alt="" />
						</div>
						<div class="pacient__name"><span>НАТАЛІЯ </span></div>
						<div class="pacient__age"><span>(51 РІК) </span></div>
						<ul class="pacient-list">
							<li class="pacient-list__item"><span>чутлива шкіра </span></li>
							<li class="pacient-list__item"><span>помітні зморшки, втрата еластичності та сяяння</span></li>
							<li class="pacient-list__item">
								<span>виражені зморшки на<br />губах</span>
							</li>
						</ul>
					</div>
				</div>
				<div class="content__product">
					<div id="content">
						<div class="name-list">
							<div class="name-list__item"><span>ОЧИЩЕННЯ</span></div>
							<div class="name-list__item"><span>ТОНІЗУВАННЯ</span></div>
							<div class="name-list__item"><span>ДЕННІ ЗАСОБИ </span></div>
							<div class="name-list__item"><span>НІЧНІ ЗАСОБИ </span></div>
						</div>

						<div class="slots" id="cardSlots">
							<div class="slots__item slots__item--1" data-number="1"></div>
							<div class="slots__item slots__item--2" data-number="2"></div>
							<div class="slots__item slots__item--3" data-number="3">
								<div class="plus"><span>+</span></div>
							</div>
							<div class="slots__item slots__item--4" data-number="4">
								<div class="plus"><span>+</span></div>
							</div>
						</div>
						<div class="arrow-list">
							<div class="arrow-list__item active">
								<img src="images/arr.svg" alt="" />
							</div>
							<div class="arrow-list__item arrow-list__item--2">
								<img src="images/arr.svg" alt="" />
							</div>
							<div class="arrow-list__item arrow-list__item--3">
								<img src="images/arr.svg" alt="" />
							</div>
							<div class="arrow-list__item arrow-list__item--4">
								<img src="images/arr.svg" alt="" />
							</div>
						</div>
						<div class="list" id="cardPile">
							<div class="list__item list__item--1" data-number="[1]" data-prod="1">
								<img src="images/prod1.png" alt="" />
							</div>
							<div class="list__item list__item--2" data-number="[2]" data-prod="2">
								<img src="images/prod2.png" alt="" />
							</div>
							<div class="list__item list__item--3" data-number="[5]" data-prod="3">
								<img src="images/prod3.png" alt="" />
							</div>
							<div class="list__item list__item--4" data-number="[5]" data-prod="4">
								<img src="images/prod4.png" alt="" />
							</div>
							<div class="list__item list__item--5" data-number="[5]" data-prod="5">
								<img src="images/prod5.png" alt="" />
							</div>
							<div class="list__item list__item--6" data-number="[5]" data-prod="6">
								<img src="images/prod6.png" alt="" />
							</div>
							<div class="list__item list__item--7" data-number="[5]" data-prod="5">
								<img src="images/prod7.png" alt="" />
							</div>
							<div class="list__item list__item--8" data-number="[5]" data-prod="5">
								<img src="images/prod8.png" alt="" />
							</div>
							<div class="list__item list__item--9" data-number="[5]" data-prod="5">
								<img src="images/prod9.png" alt="" />
							</div>

							<div class="list__item list__item--11" data-number="[5]" data-prod="5">
								<img src="images/prod11.png" alt="" />
							</div>

							<div class="list__item list__item--19" data-number="[3]" data-prod="19">
								<img src="images/prod19.png" alt="" />
							</div>
							<div class="list__item list__item--18" data-number="[5]" data-prod="18">
								<img src="images/prod18.png" alt="" />
							</div>
							<div class="list__item list__item--20" data-number="[5]" data-prod="20">
								<img src="images/prod20.png" alt="" />
							</div>
							<div class="list__item list__item--13" data-number="[3,4]" data-prod="13">
								<img src="images/prod13.png" alt="" />
							</div>
							<div class="list__item list__item--13" data-number="[3,4]" data-prod="13">
								<img src="images/prod13.png" alt="" />
							</div>
							<div class="list__item list__item--14" data-number="[3,4]" data-prod="14">
								<img src="images/prod14.png" alt="" />
							</div>
							<div class="list__item list__item--15" data-number="[5]" data-prod="15">
								<img src="images/prod15.png" alt="" />
							</div>
							<div class="list__item list__item--16" data-number="[5]" data-prod="16">
								<img src="images/prod16.png" alt="" />
							</div>
							<div class="list__item list__item--17" data-number="[5]" data-prod="17">
								<img src="images/prod17.png" alt="" />
							</div>
							<div class="list__item list__item--21" data-number="[5]" data-prod="16">
								<img src="images/prod21.png" alt="" />
							</div>
							<div class="list__item list__item--14" data-number="[3,4]" data-prod="14">
								<img src="images/prod14.png" alt="" />
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="help-inf"><span>Обери продукт і занеси у відповідну категорію догляду</span></div>
		</div>
	</div>
</section>
<style>
	section {
		opacity: 0;
	}
	.prev {
		display: none;
	}
	.next {
		display: none;
	}

	.slots__item--3 img.prod13 {
		right: 2em;
		bottom: 4.2em;
		position: absolute;
	}
	.slots__item--3 img.prod19 {
		left: 1em;
		bottom: 4em;
		position: absolute;
	}
	.slots__item--3 img.prod14 {
		right: 6.6em;
		bottom: 15em;
		position: absolute;
	}
	img.prod19 {
		width: 7em;
		margin-left: 3em;
	}
</style>
<script>
	TweenMax.to('section', 0.5, { opacity: 1, ease: Linear.easeNone });
	var tl = new TimelineMax({ paused: true, onComplete: () => show_arrow_next_slide() });
	tl.play();

	var prodItems = document.querySelectorAll('.list__item');
	var prodSlots = document.querySelectorAll('.slots__item');

	prodItems.forEach((prodItem, index) => {
		$(prodItem).draggable({
			containment: '#content',
			stack: '#cardPile div',
			cursor: 'move',
			revert: true,
		});
	});
	prodSlots.forEach((prodItem, index) => {
		$(prodItem).droppable({
			accept: '#cardPile div',
			hoverClass: 'hovered',
			drop: handleCardDrop,
		});
	});

	var correctCards = 0;
	var сountCard = [1, 1, 3, 2];

	function handleCardDrop(event, ui) {
		var slotNumber = $(this).data('number');
		var cardNumber = ui.draggable.data('number');
		var prod = ui.draggable.data('prod');

		if (cardNumber.includes(slotNumber)) {
			const index = cardNumber.indexOf(slotNumber);
			const x = cardNumber.splice(index, 1);
			$('*[data-prod="' + prod + '"]').attr('data-number', '[' + cardNumber + ']');
			сountCard[slotNumber - 1]--;
			ui.draggable.addClass('correct');
			ui.draggable.draggable('disable');

			$('.slots__item:nth-child(' + slotNumber + ')').addClass('prod' + prod);

			$(this).append('<img src="images/prod' + prod + '.png" class="prod' + prod + '" alt="">');
			if (сountCard[slotNumber - 1] === 0) {
				$('.slots__item:nth-child(' + slotNumber + ')')
					.removeClass('half-active')
					.addClass('active');
			} else {
				$('.slots__item:nth-child(' + slotNumber + ')').addClass('half-active');
			}

			ui.draggable.position({ of: $(this), my: 'center top', at: 'center top' });
			ui.draggable.draggable('option', 'revert', false);
			correctCards++;
			show_arrow_next_slide();
		}
	}
	function show_arrow_next_slide() {
		if (correctCards == 7) {
			setTimeout(function () {
				$('.prev').show('slow');
				$('.next').show('slow');
			}, 2000);
		}
	}
</script>
